!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],t):t(window.jQuery)}(function(t){"use strict";var e=t.blueimp.fileupload.prototype.options.add;t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{processQueue:[],add:function(i,r){var n=t(this);r.process(function(){return n.fileupload("process",r)}),e.call(this,i,r)}},processActions:{},_processFile:function(e){var i=this,r=t.Deferred().resolveWith(i,[e]),n=r.promise();return this._trigger("process",null,e),t.each(e.processQueue,function(t,e){var r=function(t){return i.processActions[e.action].call(i,t,e)};n=n.pipe(r,e.always&&r)}),n.done(function(){i._trigger("processdone",null,e),i._trigger("processalways",null,e)}).fail(function(){i._trigger("processfail",null,e),i._trigger("processalways",null,e)}),n},_transformProcessQueue:function(e){var i=[];t.each(e.processQueue,function(){var r={},n=this.action,a=this.prefix===!0?n:this.prefix;t.each(this,function(i,n){r[i]="string"===t.type(n)&&"@"===n.charAt(0)?e[n.slice(1)||(a?a+i.charAt(0).toUpperCase()+i.slice(1):i)]:n}),i.push(r)}),e.processQueue=i},processing:function(){return this._processing},process:function(e){var i=this,r=t.extend({},this.options,e);return r.processQueue&&r.processQueue.length&&(this._transformProcessQueue(r),0===this._processing&&this._trigger("processstart"),t.each(e.files,function(e){var n=e?t.extend({},r):r,a=function(){return i._processFile(n)};n.index=e,i._processing+=1,i._processingQueue=i._processingQueue.pipe(a,a).always(function(){i._processing-=1,0===i._processing&&i._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=t.Deferred().resolveWith(this).promise()}})});